"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[59611],{24699:function(e,t,n){n.d(t,{K:function(){return o},Z:function(){return i}});var r=n(11987),i=function(){var e="/email/ss_premier_sub_account_activation_email";return{url:e,formattedUrl:(0,r.format)({pathname:e})}},o=function(){var e="/email/premier_cart_confirmation";return{url:e,formattedUrl:(0,r.format)({pathname:e})}}},92612:function(e,t,n){n.d(t,{KK:function(){return y},Jj:function(){return _},GA:function(){return b},tU:function(){return m},Hg:function(){return f},c:function(){return w},Tw:function(){return h},$6:function(){return S}});var r=n(17674),i=n(59499),o=n(90116),s=n(95944),a=n(45446),c=["contributor_inactive","contributor_opted_out","MEDIA_NOT_AVAILABLE"],u=n(6222),d=n(68889),l=n(25021);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(e){var t=e.licenseName,n=e.cartData,r=e.asset;return t?!(null===n||void 0===n||!n.items.find((function(e){return e.id===(null===r||void 0===r?void 0:r.id)&&e.licenseId===t}))):!(null===n||void 0===n||!n.items.find((function(e){return e.id===(null===r||void 0===r?void 0:r.id)})))},m=function(e){var t=e.asset;return!e.unavailableAssets.find((function(e){return e.contentId===(0,l.OP)({asset:t})&&e.contentType===t.type}))},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.errors,n=void 0===t?[]:t;return n.some((function(e){return c.includes(e)}))},y=function(e){var t=e.cachedCart,n=e.newItems,r=[].concat((0,o.Z)((null===t||void 0===t?void 0:t.items)||[]),(0,o.Z)(n));return v(v({},t),{},{items:r,count:r.length})},g=function(e){var t=e.item,n=e.licensedAssets;return(null===n||void 0===n?void 0:n.find((function(e){return e.contentId===String(t.id)})))?0:t.isUnlimited?.1:parseFloat(t.price)},S=function(e){var t=e.primaryCart,n=e.sortField,r=e.sortOrder,i=e.alreadyLicensedPrimaryAssets;return t.sort((function(e,t){return n===a.TK.ADDED_TIME?function(e){var t=e.item1,n=e.item2,r=e.sortField,i=void 0===r?"addedTime":r;return e.sortOrder===u.sl?Number(new Date(n[i]))-Number(new Date(t[i])):Number(new Date(t[i]))-Number(new Date(n[i]))}({item1:e,item2:t,sortField:n,sortOrder:r}):function(e){var t=e.item1,n=void 0===t?{}:t,r=e.item2,i=void 0===r?{}:r,o=e.sortOrder,s=e.licensedAssets,a=g({item:n,licensedAssets:s}),c=g({item:i,licensedAssets:s});return o===u.sl?a-c:c-a}({item1:e,item2:t,sortField:n,sortOrder:r,licensedAssets:i})}))},h=function(e){var t,n=e.rolodexAddress,i=(null===(t=n.streetLines)||void 0===t?void 0:t.split("\n"))||[],o=(0,r.Z)(i,2),s=o[0],a=o[1],c=n.locality,u=n.postalCode,d=n.region;return{country:n.country,company:n.company,city:c,zip:u,state:d,address1:s,address2:a}},_=function(e){var t,n=e.billingEntity;return(null===n||void 0===n||null===(t=n.rolodexAddresses)||void 0===t?void 0:t.find((function(e){var t;return"licensing"===e.addressType||(null===(t=e.usages)||void 0===t?void 0:t.includes("licensing"))})))||{}},O=function(e){var t=e.acc,n=e.asset;return function(e){var t=e.asset,n=e.alreadyLicensedAssets;return(null===t||void 0===t?void 0:t.price)===s.q9||(0,d.te)({alreadyLicensedAssets:n,asset:t})}({asset:n,alreadyLicensedAssets:e.alreadyLicensedAssets})?t:t+parseFloat(null===n||void 0===n?void 0:n.price)},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t?e.filter((function(e){return!e.isUnavailableAsset})).reduce((function(e,n){return O({acc:e,asset:n,alreadyLicensedAssets:t})}),0):0}},97708:function(e,t,n){n.d(t,{Fy:function(){return u},JD:function(){return s},Js:function(){return d},qw:function(){return a},rw:function(){return c}});var r=n(95944),i=n(43257),o=n(25021),s=function(e){var t=e.assetId,n=e.assetType;if((0,o.EK)({id:t}))return r.gP;switch(n){case r.k4:case r.Y_:case r.ox:return r.pV;case r.FM:return r.pX;case r.xF:case r.jr:return r.j0;default:return n}},a=function(e){var t,n=e.asset;if(null!==(t=n.image)&&void 0!==t&&t.isVector)return r.ox;if((0,o.EK)(n))return r.gP;var i=n.imageType||n.itemType||n.type;switch(i){case r.X2:case r.Y_:return r.k4;case r.FM:return r.pX;case r.jr:return r.j0;default:return i}},c=function(e){var t=e.asset;if((0,o.N3)(t))return r.gP;if((0,o.so)(t))return r.cF;var n=t.imageType||t.itemType||t.type;switch(n){case r.ox:case r.pV:case r.X2:case r.Y_:return r.k4;case r.FM:return r.pX;case r.jr:return r.j0;default:return n}},u=function(e){var t=e.asset;if((0,o.N3)(t))return r.nX;if((0,o.so)(t))return r.A7;var n=t.imageType||t.itemType||t.type;switch(n){case r.ox:case r.pV:case r.X2:case r.Y_:return r.k4;case r.FM:return r.pX;case r.jr:case r.xF:return r.j0;default:return n}},d=function(e){var t=u({asset:e.mediaItem});return e.licenseName===i._r[t]}},68889:function(e,t,n){n.d(t,{Ax:function(){return p},H8:function(){return c},Hl:function(){return v},NV:function(){return a},iI:function(){return d},j2:function(){return l},te:function(){return u},uP:function(){return s}});var r=n(95944),i=n(43257),o=n(97708),s=function(e){var t,n,r=e.license,s=e.existingAssetsLicenses;if(!s)return(null===r||void 0===r||!r.licenseName||!i.b5.includes(null===r||void 0===r?void 0:r.licenseName))&&s;var a=(0,o.Fy)({asset:r.mediaItem});return!(null===s||void 0===s||null===(t=s[null===(n=r.mediaItem)||void 0===n?void 0:n.id])||void 0===t||!t.some((function(e){return e!==i._r[a]})))},a=function(e){var t=e.subscriptions;return(void 0===t?[]:t).some((function(e){var t=e.redeemableFor;return i.Sk.some((function(e){return e===t}))}))?i.s5:i.Hv},c=function(e){return e.reduce((function(e,t){var n=t.licenseId;return e.includes(n)||e.push(n),e}),[])},u=function(e){var t=e.alreadyLicensedAssets,n=e.asset;return!!t.find((function(e){var t=e.contentId,i=e.contentType,o=e.licenseId,s=n.type===r.k4?r.pV:n.type;return t===n.id&&i===s&&o===n.licenseId}))},d=function(e){var t,n=e.existingLicenses,o=e.asset;switch(o.type){case r.FM:case r.pX:return!!i.oP.some((function(e){return function(e){var t=e.licenseType,n=e.existingLicenses,r=e.asset,i=e.isSelect,o=void 0!==i&&i,s=["footage_".concat(t,"_sd"),"footage_".concat(t,"_hd")],a=[].concat(s,["footage_".concat(t,"_lowres")]);return o&&s.push("footage_".concat(t,"_4k")),r.licenseId==="footage_".concat(t,"_sd")?null===n||void 0===n?void 0:n.some((function(e){return!!s.includes(e)})):r.licenseId==="footage_".concat(t,"_lowres")&&(null===n||void 0===n?void 0:n.some((function(e){return!!a.includes(e)})))}({asset:o,licenseType:e,existingLicenses:n})}))||!(null===n||void 0===n||!n.includes(o.licenseId));case r.k4:default:return!(null===n||void 0===n||!n.includes(null===(t=o.licenseId)||void 0===t?void 0:t.replace(/_unlimited/,"")))}},l=function(e){var t,n=e.error,r=e.t,o=null===n||void 0===n||null===(t=n[0])||void 0===t?void 0:t.meta;if((null===o||void 0===o?void 0:o.exception_type)===i.JW){var s=o.errors.slice(-1).pop().value,a="comp_limit"===s.name;return"P1M"===s.period_length?r(a?"ent:monthly_comp_limit_reached":"ent:monthly_licensing_limit_reached"):r(a?"ent:daily_comp_limit_reached":"ent:daily_licensing_limit_reached")}return r("ent:license_now_error_message")},p=function(e){var t=e.organizationId;return"organization-".concat(t)},v=function(e){var t=e.user,n=e.isItemLoaded,r=e.labels;return""!==t?t:n?r.notAwailable:""}},13807:function(e,t,n){n.d(t,{P:function(){return p},o:function(){return l}});var r=n(59499),i=n(43267),o=n(67294),s=n(95944),a=n(81906),c=n(24366),u=n(2397),d=function(e){return e%1===0?0:2},l=function(){var e=(0,c.PE)(),t=e.fullLocale,n=e.currencyData,l=(n=void 0===n?{}:n).currency,p=void 0===l?"USD":l,v=(0,i.$G)(u.Pkf).t;return(0,o.useCallback)((function(e){var n=e.price,i=e.localeCurrencyOverride,o=void 0===i?"":i,c=e.priceType,u=void 0===c?a.Br:c,l=function(e){var t=e.t,n=e.price;return{compCredits:t("comp_credits",{PRICE:n}),credit:t(["1",1].includes(n)?"credit":"credits",{PRICE:n}),licenseCredits:t("license_credits",{PRICE:n}),unlimited:t("ent:unlimited")}}({t:v,price:n});if(n===s.q9)return l.unlimited;var f=function(e){var t,n=e.labels,i=void 0===n?{}:n;return t={},(0,r.Z)(t,a.vh,i.credit),(0,r.Z)(t,a.un,i.compCredits),(0,r.Z)(t,a.eM,i.licenseCredits),t}({labels:l}),m=null===f||void 0===f?void 0:f[u];return m||new Intl.NumberFormat(t,{style:"currency",currency:o||p,minimumFractionDigits:d(n)}).format(n)}),[p,t,v])},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.Br,r=l();return r({price:e,localeCurrencyOverride:t,priceType:n})}},59611:function(e,t,n){n.d(t,{Z:function(){return Q}});var r,i=n(50029),o=n(90116),s=n(59499),a=n(87794),c=n.n(a),u=n(67294),d=n(15313),l=n(357),p=n(51741),v=n(95944),f=n(43257),m=n(24366),b=n(97708),y=n(840),g=n(68889),S=n(79138),h=n(92628),_=n(25021),O=n(8924),w=function(e){var t,n=e.assets,r=void 0===n?[]:n,i=e.user,s=function(e){var t=e.assets,n={};return t.forEach((function(e){var t=(0,_.Tp)(e),r=(0,b.JD)({assetId:e.id,assetType:t});n[r]=[].concat((0,o.Z)(n[r]?n[r]:[]),[e])})),n}({assets:r});return null===(t=Object.values(s))||void 0===t?void 0:t.map((function(e){var t=function(e){var t,n=e.assets,r=(0,_.Tp)(n[0]);return{include:"subscriptions",content_type:(0,b.JD)({assetType:r,assetId:null===(t=n[0])||void 0===t?void 0:t.id}),content_ids:n.reduce((function(e,t){return[].concat((0,o.Z)(e),[t.id.toString()])}),[]).join(",")}}({assets:e}),n=(0,l.Td)({urlParams:{licenseeIdentifier:"organization-".concat(null===i||void 0===i?void 0:i.organizationId)},queryParams:t}).formattedUrl;return O.uS.get(n)}))},I=function(e){var t=e.data,n=[];return t.map((function(e){var t=e.id.split("-"),r=t[t.length-1],i=function(e){var t=e.assetEligibility,n=t.permittedLicenses,r=t.subscriptions;return null===r||void 0===r?void 0:r.filter((function(e){var t=e.license;return n.includes(t.replace("_unlimited",""))}))}({assetEligibility:e});return n.push({assetId:r,subscriptions:i})})),n},P=n(69089),C=n(75512),j=n(98695),T=n(94428),D=n(32655),A=n(13807),E=n(69648),N=n(59453),Z=n(43267),k=n(53554),L=n.n(k),M=n(24699),x="noticeError",U=n(92612),F=n(2397),R=n(63861),V=n(96747),z=n(89901),Y=n(47765),B=new RegExp(L()),X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.emailCartCheckoutConfirmation,n=e.orderEmail;return t&&n?n.split(",").filter((function(e){return B.test(e)})):[]},q=function(e){var t=e.purchaseOrder;return"".concat(null===t||void 0===t?void 0:t[0]," : ").concat(null===t||void 0===t?void 0:t[1]).split(" ").map((function(e){return(0,R.k)(e)})).join(" ")},J=function(e){var t=e.t,n=e.keys,r=n.currentYear,i=n.emailAddress,o=n.purchaseOrder;return{copyright:t("site-footer:copyright",{CURRENT_YEAR:r}),emailSentTo:t("ent:email_sent_to",{EMAIL_ADDRESS:i}),emailSubjectLine:"".concat(t("ent:order_confirmation_email_subject")," | ").concat(q({purchaseOrder:o})),name:t("account:profile_name"),needAssistance:t("ent:contact_sales_representative"),orderConfirmation:t("ent:order_confirmation"),purchaseInformation:t("ent:purchase_information_key"),shutterstockAddress:t("tos:tos_2020_09_04_part_v_24_table_r2_c2_l2"),shutterstockInc:t("tos:tos_2020_09_04_part_v_24_table_r2_c2_l1"),subtotal:t("ent:order_confirmation_email_subtotal"),thisIsNotAnInvoice:t("ent:not_an_invoice")}},K=n(2577);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=(r={},(0,s.Z)(r,f.td,l.CE),(0,s.Z)(r,f.zM,l.s0),r),W=function(e){var t=e.asset,n=e.subscriptions,r=(0,b.qw)({asset:t}),i=t.licenseId,s=t.contentTier;switch(r){case v.pX:return(0,h.I9)({assetType:v.pX,subscriptions:[].concat((0,o.Z)(null===n||void 0===n?void 0:n.videoSubscriptions),(0,o.Z)(null===n||void 0===n?void 0:n.videoCompSubscriptions)),selectedLicenseId:i});case v.xF:case v.j0:return(0,h.$L)({subscriptions:[].concat((0,o.Z)(n.musicSubscriptions),(0,o.Z)(n.musicCompSubscriptions)),licenseName:t.licenseId});case v.gP:return(0,h.$L)({subscriptions:[].concat((0,o.Z)(n.editorialImageSubscriptions),(0,o.Z)(n.editorialImageCompSubscriptions),(0,o.Z)(n.editorialVideoSubscriptions),(0,o.Z)(n.editorialVideoCompSubscriptions)),licenseName:t.licenseId,contentTier:s});case v.k4:default:return(0,h.$L)({subscriptions:[].concat((0,o.Z)(n.imageSubscriptions),(0,o.Z)(n.imageCompSubscriptions)),licenseName:t.licenseId,contentTier:s})}},Q=function(){var e=(0,N.av)().data,t=(0,u.useState)(!1),n=t[0],r=t[1],s=(0,u.useState)(""),a=s[0],l=s[1],v=(0,u.useState)({}),_=v[0],k=v[1],L=(0,E.j)().data,R=(0,d.I0)(),B=function(){var e=(0,D.yh)().analytics,t=(0,(0,T.Y)().getSearchContext)();return(0,u.useCallback)((function(n){var r=n.assets,i=void 0===r?[]:r;e.productLicensed({products:i.map((function(e){return(0,j.bR)({asset:e,shouldGetSearchContextFromAsset:!0})})),search_context:t})}),[e,t])}(),q=(0,A.o)(),G=(0,K.G)(),Q=(0,m.PE)().locale,ee=function(){var e=(0,Z.$G)(F.jp5).t,t=(0,E.j)().data,n=(0,z.b)().data,r=(0,V.B)().data,i=(0,Y.z)({fetchTrigger:!0})||{},s=i.name,a=i.email,c=i.phone,d=(0,m.PE)(),l=d.locale,p=d.fullLocale,v=(0,A.o)(),f=(0,u.useCallback)((function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=i.cartTotalCurrency,d=i.filteredOrderMetadata,f=i.licenseMetadata,m=i.priceType,b=[].concat((0,o.Z)(null!==n&&void 0!==n&&n.emailCartCheckoutConfirmation?[null===t||void 0===t?void 0:t.email]:[]),(0,o.Z)(X(r)));if(!!b.length&&null!==d&&void 0!==d&&d.length){var y=J({t:e,keys:{currentYear:(new Date).getFullYear(),emailAddress:null===t||void 0===t?void 0:t.email,purchaseOrder:Object.entries(f)[0],repName:s,repPhoneNumber:c,repEmail:a}});try{var g={cartItems:d,fullName:null===t||void 0===t?void 0:t.fullName,invoiceDate:new Intl.DateTimeFormat(p).format(new Date),labels:y,licenseMetadata:f,repEmail:a,repName:s,repPhoneNumber:c,totalAmount:v({price:(0,U.c)(d,[]),localeCurrencyOverride:u,priceType:m}),username:null===t||void 0===t?void 0:t.username};O.IZ.post((0,M.K)().formattedUrl,{emails:(0,o.Z)(new Set(b)),emailBody:g,emailSubject:"".concat(y.emailSubjectLine),language:l})}catch(I){var S,h,_,w;null===(S=window.NREUM)||void 0===S||null===(h=S.setTransactionName)||void 0===h||h.call(S,"sendOrderConfirmationEmail/".concat(x)),null===(_=window.NREUM)||void 0===_||null===(w=_.noticeError)||void 0===w||w.call(_,I,{message:"Failed sending order confirmation emails to: ".concat(b.join(", "))})}}}),[p,l,r,v,a,s,c,e,null===t||void 0===t?void 0:t.email,null===t||void 0===t?void 0:t.fullName,null===t||void 0===t?void 0:t.username,null===n||void 0===n?void 0:n.emailCartCheckoutConfirmation]);return{sendOrderConfirmationEmails:f}}(),te=ee.sendOrderConfirmationEmails,ne=(0,u.useCallback)(function(){var t=(0,i.Z)(c().mark((function t(n){var o,s,a,u,d,v,m,_,j,T,D,A,E,N,Z,M,x,U,F,V,z,Y,X,J,K,ee,ne,re;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.alreadyLicensedAssets,s=void 0===o?[]:o,a=n.assets,u=void 0===a?[]:a,d=n.cartMetadata,v=void 0===d?{}:d,m=n.licenseeMetadata,_=void 0===m?{}:m,j=n.isVideoComp,T=void 0!==j&&j,D=n.licenseMetadata,A=void 0===D?{}:D,E=n.licensingType,N=n.selectedAssetSize,Z=void 0===N?"":N,U=function(){var t=(0,i.Z)(c().mark((function t(){var n,r,o,s;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(w({assets:u,user:L}));case 2:return n=t.sent.map((function(e){var t=e.data;return(0,P.O)(t)})).flat(),r=I({data:n}),o=u.map(function(){var e=(0,i.Z)(c().mark((function e(t){var n,i,o,s,a,u,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,b.qw)({asset:t}),i=t.licenseId,o=(null===r||void 0===r?void 0:r.find((function(e){return e.assetId===String(t.id)})))||{},s=o.subscriptions,a=(0,h.I9)({assetType:n,subscriptions:s,selectedLicenseId:i})||{},u=a.id,d=a.license,e.t0=$,e.t1=$,e.t2=$,e.t3={},e.next=10,(0,y.Oo)({asset:t,selectedAssetSize:Z,licenseName:d,isVideoComp:T});case 10:return e.t4=e.sent,e.t5=(0,e.t2)(e.t3,e.t4),e.t6=Z&&S.Bg[Z]&&{comp_size:Z},e.t7=(0,e.t1)(e.t5,e.t6),e.t8={},e.t9={license_name:d,show_modal:!0,subscription_id:u},e.abrupt("return",(0,e.t0)(e.t7,e.t8,e.t9));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.next=7,Promise.all(o);case 7:return s=t.sent,t.abrupt("return",{licensingPayload:{content:s,license_metadata:A,required_cookies:""},orderMetadata:u.map((function(t){var n=t.currency,r=t.description,i=t.descriptionLanguageMap,o=void 0===i?{}:i,s=t.id,a=t.itemType,c=t.headline,u=t.licenseId,d=t.preview,l=void 0===d?{}:d,p=t.price,v=t.priceType,f=t.src,m=t.thumb,b=t.thumbImageUrl,y=t.title,g=t.type,S=n,h=p,_=v;if(!S||!h||!_){var O=W({asset:t,subscriptions:e}),w=O.creditCurrency,I=O.creditPrice,P=O.creditType;S=S||w,h=h||I,_=v||P}return S&&!M&&(M=S),_&&!x&&(x=_),{description:o[Q]||r,formattedPrice:q({price:h,localeCurrencyOverride:S,priceType:v}),headline:c,id:s,itemType:a,licenseId:u,licenseName:G({licenseName:u}),price:h,priceType:_,thumbnailSrc:f||b||l.url||m,title:y,type:g}}))});case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.prev=2,r(!0),l(""),t.next=7,U({assets:u.map((function(e){return e.mediaItem?$($({},e.mediaItem),{},{licenseId:e.licenseId}):e})),isVideoComp:T,licenseMetadata:A,selectedAssetSize:Z,subscriptions:e});case 7:return z=t.sent,Y=z.licensingPayload,X=z.orderMetadata,J=H[E]({urlParams:{licenseeIdentifier:"organization-".concat(null===L||void 0===L?void 0:L.organizationId)}}).formattedUrl,t.next=13,O.uS.post(J,Y);case 13:return K=t.sent,B({assets:u}),R(C.L6.setLicensedAssets({assets:u,metadata:v,licensedContent:(null===(F=(0,P.O)(K.data))||void 0===F||null===(V=F.meta)||void 0===V?void 0:V.licensedContent)||[]})),u.some((function(e){var t=e.licenseId;return f.b5.includes(t)}))||(ee=X.filter((function(e){return!(0,g.te)({alreadyLicensedAssets:s,asset:e})})),te({cartTotalCurrency:M,filteredOrderMetadata:ee,licenseMetadata:_,priceType:x})),l(p.MR),t.abrupt("return",K);case 22:throw t.prev=22,t.t0=t.catch(2),k(null===(ne=t.t0.response)||void 0===ne||null===(re=ne.data)||void 0===re?void 0:re.details),l(p.cM),t.t0;case 27:return t.prev=27,r(!1),t.finish(27);case 30:case"end":return t.stop()}}),t,null,[[2,22,27,30]])})));return function(e){return t.apply(this,arguments)}}(),[R,G,Q,q,B,te,L,e]);return{isLicensing:n,licensingAssetsHandler:ne,licensingError:_,licensingStatus:a,setIsLicensing:r,setLicensingStatus:l}}},96747:function(e,t,n){n.d(t,{B:function(){return f}});var r=n(59499),i=n(40821),o=n(357),s=n(43257),a=n(89639),c=n(42180),u=n(8924),d=n(69089),l=n(69648);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.queryParams,n=(0,l.j)(),r=n.data,p=v({target:s.dl,site_name:a.mC,setting_type:s.dl},t);return(0,i.ZP)((null===r||void 0===r?void 0:r.id)&&(null===r||void 0===r?void 0:r.organizationId)&&(0,o.nI)({queryParams:p}).formattedUrl,(function(e){return u.uS.get(e).then((function(e){return(0,d.O)(e.data)}))}),{dedupingInterval:c.yR})}},59453:function(e,t,n){n.d(t,{Oy:function(){return P},DJ:function(){return I},av:function(){return C},V9:function(){return j}});var r=n(90116),i=n(4730),o=n(59499),s=n(40821),a=n(357),c=n(43257),u=n(42180),d=n(43788),l=n(69648),p=n(59817),v=n(17437),f=n(8924),m=n(69089),b=[{name:"years",unit:"Y"},{name:"months",unit:"M"},{name:"weeks",unit:"W"},{name:"days",unit:"D"}],y=new RegExp(["P"].concat((0,r.Z)(b.map((function(e){return function(e,t){return"((?<".concat(e,">-?\\d+)").concat(t,")?")}(e.name,e.unit)})))).join("")),g={years:function(e){var t=e.date,n=e.numberOfUnits;return t.setUTCFullYear(t.getUTCFullYear()-n),t},months:function(e){var t=e.date,n=e.numberOfUnits;return t.setUTCMonth(t.getUTCMonth()-n),t},weeks:function(e){var t=e.date,n=e.numberOfUnits;return t.setUTCDate(t.getUTCDate()-7*n),t},days:function(e){var t=e.date,n=e.numberOfUnits;return t.setUTCDate(t.getUTCDate()-n),t}},S=function(e){var t=e.date,n=e.duration;if(!t||!n)return null;try{var r=function(e){var t=y.exec(e);if(!t||!t.groups)return[];var n=t.groups;return b.reduce((function(e,t){var r=t.name,i=parseInt(n[r],10);return Number.isNaN(i)||e.push({name:r,value:i}),e}),[])}(n);return r.length?function(e){var t=e.date,n=e.parsedDuration,r=new Date(t);return n.reduce((function(e,t){var n=t.name,r=t.value;return g[n]({date:e,numberOfUnits:r})}),r).toISOString()}({date:t,parsedDuration:r}):null}catch(i){return null}},h=["isLoading"];function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w={editorialImageSubscriptions:c.T_,editorialImageCompSubscriptions:c.FO,editorialVideoSubscriptions:c.vW,editorialVideoCompSubscriptions:c.Uj,imageSubscriptions:c.xk,imageCompSubscriptions:[c.Ix],videoSubscriptions:c.S9,videoCompSubscriptions:[c.f1],videoPremierSubscriptions:c.Xm,videoPremierSmSubscriptions:c.JI,videoMediaSubscriptions:c.YV,videoPlatformSubscriptions:c.Lj,videoMediaSmSubscriptions:c.IS,videoPremierSelectSubscriptions:[c.Mb],videoMediaSelectSubscriptions:[c.G],musicSubscriptions:c.xq,musicCompSubscriptions:[c.zU]},I=function(){var e=(0,l.B)(),t=(0,a.ec)().formattedUrl;return(0,s.ZP)(e?t:null,(function(){return f.uS.get(t).then((function(e){return(0,m.O)(e.data)}))}),{dedupingInterval:u.no})},P=function(e){return e.reduce((function(e,t){return Object.keys(w).forEach((function(n){(function(e){var t=e.types,n=e.subscription;return t.includes(n.redeemableFor)})({types:w[n],subscription:t})&&e[n].push(O(O({},t),{},{type:n}))})),e}),{editorialImageSubscriptions:[],editorialImageCompSubscriptions:[],editorialVideoSubscriptions:[],editorialVideoCompSubscriptions:[],imageSubscriptions:[],imageCompSubscriptions:[],videoSubscriptions:[],videoCompSubscriptions:[],videoPremierSubscriptions:[],videoPremierSmSubscriptions:[],videoMediaSubscriptions:[],videoMediaSmSubscriptions:[],videoPlatformSubscriptions:[],videoPremierSelectSubscriptions:[],videoMediaSelectSubscriptions:[],musicSubscriptions:[],musicCompSubscriptions:[]})},C=function(){var e,t,n=(0,l.B)(),o=(0,p.U)(),s=o.isLoading,a=(0,i.Z)(o,h),c=I().data,u=(0,v.w)().data,f=(u=void 0===u?{}:u).data,m=void 0===f?{}:f;if(s||n&&void 0===c)return{data:void 0};var b=Array.isArray(c)?null===c||void 0===c?void 0:c.filter((function(e){return"active"===e.status})):[],y=Array.isArray(c)?function(e){var t,n,r,i,o,s=e.activeSubscriptions,a=e.subscriptions;if(!a)return{};var c=function(e){var t=e.subscriptionExpiration,n=e.duration;return S({date:t,duration:n})},u=function(e,t){var n=e.startDate;return t.startDate-n},d=s.map((function(e){return O(O({},e),{},{startDate:new Date(c(e))})})).sort(u)[0]||a.map((function(e){return O(O({},e),{},{startDate:new Date(c(e))})})).sort(u)[0];return d?{orderType:d.purchaseType,subscriptionId:d.id,subscriptionPermissionsExpireDate:d.subscriptionExpiration,autoRenewal:d.autoRenewal?String(d.autoRenewal):void 0,productTextId:null===d||void 0===d||null===(t=d.product)||void 0===t?void 0:t.name,productLengthTerm:d.duration,productDownloadAllotment:null!==(n=d.product)&&void 0!==n&&n.downloadCredits?String(null===(r=d.product)||void 0===r?void 0:r.downloadCredits):void 0,productReportingBusinessUnit:null===(i=d.product)||void 0===i?void 0:i.reportingBusinessUnit,productCategory:null===(o=d.product)||void 0===o?void 0:o.revenueModelDetail}:{}}({activeSubscriptions:b,subscriptions:c}):{};if((0,d.Kc)({userCapabilities:a})){var g=(0,d.cT)({userCapabilities:a,subscriptions:c});e=g.formattedSubscriptions,t=g.debitableSubscriptionInfo}var _=P(e||c||[]),w=m.attributes,C=(w=void 0===w?{}:w).lifetimeProducts||Array.isArray(c)&&c&&c.length||0;return{data:O(O({allSubscriptions:Object.values(_).reduce((function(e,t){return[].concat((0,r.Z)(e),(0,r.Z)(t))}),[]),activeSubscriptions:b,mostRecentSubscription:y,totalNumSubscriptionsAllTime:C,totalNumSubscriptionsActive:b&&b.length||0},_),t)}},j=function(){var e=(0,l.B)(),t=C();return!1===e?{data:{activeSubscriptions:[],allSubscriptions:[],mostRecentSubscription:void 0,totalNumSubscriptionsActive:0,totalNumSubscriptionsAllTime:0}}:t}},17437:function(e,t,n){n.d(t,{w:function(){return a}});var r=n(40821),i=n(357),o=n(69648),s=n(8924),a=function(){var e=(0,o.B)(),t=(0,i.sY)().formattedUrl;return(0,r.ZP)(e?t:null,(function(){return s.uS.get(t).then((function(e){return e.data}))}))}}}]);
//# sourceMappingURL=59611-d0b0462d234bfa9c.js.map