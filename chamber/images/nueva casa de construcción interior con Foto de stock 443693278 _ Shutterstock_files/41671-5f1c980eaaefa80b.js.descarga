"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[41671],{91995:function(e,t,i){i.d(t,{A:function(){return f}});var n=i(67294),o=i(51741),s=i(25021),r=i(92628),a=i(12439),l=i(69648),c=i(59453),u=i(59499),d=i(95944);function p(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function g(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?p(Object(i),!0).forEach((function(t){(0,u.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var _=function(e){var t,i=e.assetType,n=e.clickAnalyticsLabels,o=e.hasExistingLicense,s=e.hasExistingSubscription,r=e.isFootageSelect,a=e.isLoggedInUser,l=e.isRexEditorialAsset,c=e.labels,u=s||o,p=a&&!u,_=a&&u;switch(i){case d.k4:t=function(e){var t=e.clickAnalyticsLabels,i=e.isRexEditorialAsset,n=e.isLoggedInUser,o=e.labels;return g(g({},i?{downloadButtonClickAnalyticsLabel:t.downloadButton,downloadButtonLabel:o.download}:{downloadButtonClickAnalyticsLabel:t.downloadFreeButton,downloadButtonLabel:o.downloadForFree}),{},{shouldShowDownloadButton:!n,shouldShowAddToCartButton:!1,shouldShowOpenLicenseDrawerButton:n})}({clickAnalyticsLabels:n,isLoggedInUser:a,isRexEditorialAsset:l,labels:c});break;case d.pX:t=function(e){var t=e.isFootageSelect,i=e.isLoggedInUser,n=e.isLoggedInWithoutPlan,o=e.isLoggedInWithPlan;return e.isRexEditorialAsset?{shouldShowAddToCartButton:!1,shouldShowFreeDownloadButton:!1,shouldShowOpenLicenseDrawerButton:!0}:{shouldShowAddToCartButton:!i||n||t,shouldShowDownloadButton:!1,shouldShowOpenLicenseDrawerButton:o&&!t}}({isFootageSelect:r,isLoggedInUser:a,isLoggedInWithoutPlan:p,isLoggedInWithPlan:_,isRexEditorialAsset:l});break;case d.xF:case d.tn:default:t={shouldShowAddToCartButton:!a||p||r,shouldShowDownloadButton:!1,shouldShowOpenLicenseDrawerButton:_&&!r}}return o?{shouldShowAddToCartButton:!1,shouldShowDownloadButton:!1,shouldShowOpenLicenseDrawerButton:!0}:t},f=function(e){var t,i,u=e.asset,p=e.clickAnalyticsLabels,g=void 0===p?{}:p,f=e.labels,b=void 0===f?{}:f,h=e.shouldFetchEligibility,v=void 0===h||h,w=e.assetIsLicensed,m=void 0!==w&&w,S=u.isFootageSelect,y=(0,s.Tp)(u),A=(0,s.EK)(u),O=(0,l.B)(),Z=(0,c.DJ)().data,L=(0,r.lc)({subscriptions:Z,assetType:y}),B=function(e){var t=e.isLoggedInUser,i=e.shouldFetchEligibility,n=e.hasActiveSubscriptionForAssetType,o=e.assetType,s=e.isRexEditorialAsset,r=e.isFootageSelect,a=!s&&!r&&(o===d.pX||o===d.xF||o===d.tn);return!!(t&&i&&!1===n&&a)}({isLoggedInUser:O,shouldFetchEligibility:v,hasActiveSubscriptionForAssetType:L,assetType:y,isRexEditorialAsset:A,isFootageSelect:S}),P=(0,a.IP)({assets:[u],shouldFetch:B}).data,j=(0,n.useState)({status:"",error:void 0}),D=j[0],F=j[1],E=m||!(null===P||void 0===P||null===(t=P.licenses)||void 0===t||!t.length),x=!(null===P||void 0===P||null===(i=P.subscriptions)||void 0===i||!i.length)||L,T=void 0===O||O&&void 0===Z,k=_({assetType:y,clickAnalyticsLabels:g,hasExistingLicense:E,hasExistingSubscription:x,isFootageSelect:S,isLoggedInUser:O,isRexEditorialAsset:A,labels:b}),C=k.shouldShowDownloadButton,I=k.shouldShowOpenLicenseDrawerButton,z=k.shouldShowAddToCartButton,R=k.downloadButtonClickAnalyticsLabel,N=k.downloadButtonLabel,U=(0,n.useCallback)((function(){return F({status:o.MR,error:void 0})}),[]);return{addToCartFailureHandler:(0,n.useCallback)((function(e){return F({status:o.cM,error:e})}),[]),addToCartStatus:D,addToCartSuccessHandler:U,closeAddToCartSnackbarHandler:(0,n.useCallback)((function(){return F({status:"",error:void 0})}),[]),downloadButtonClickAnalyticsLabel:R,downloadButtonLabel:N,eligibility:P,hasExistingLicense:E,shouldShowAddToCartButton:z,shouldShowButtonLoadingPlaceholder:T,shouldShowDownloadButton:C,shouldShowOpenLicenseDrawerButton:I}}},37254:function(e,t,i){i.d(t,{Cs:function(){return A},Gp:function(){return D},HS:function(){return b},Ji:function(){return w},LQ:function(){return E},MQ:function(){return m},OA:function(){return z},OZ:function(){return B},Y:function(){return v},cs:function(){return O},d9:function(){return F},hb:function(){return h},pe:function(){return y},rR:function(){return S},tT:function(){return j},ur:function(){return f},vZ:function(){return P}});var n,o,s,r,a,l,c,u,d=i(59499),p=i(93158),g=i(703),_=i(95944),f="standard",b="enhanced",h="footage_standard",v="footage_enhanced",w=["single_image_standard_license","enhanced_1_download_365_day"],m=(g.SD,g.HD,g.yF,"P1Y"),S="P1M",y=(n={},(0,d.Z)(n,g.SD,"nonhd"),(0,d.Z)(n,g.HD,g.HD),(0,d.Z)(n,g.yF,g.eD),"select_video"),A="pack",O="single",Z=["allotment_credits","commitment_length","currency","download_credits","eligible_for_rebilling","license","name","price","prices"],L=[].concat(Z,["repeat_interval"]),B={"filter[group_id]":"video-all"},P={"filter[group_id]":"video-unit"},j={"filter[group_id]":"image_pricing"},D="coupon",F="coupon_code",E=(o={},(0,d.Z)(o,_.gP,{"fields[products]":Z.join(",")}),(0,d.Z)(o,_.xF,{"fields[products]":L.join(",")}),(0,d.Z)(o,_.pX,{"fields[products]":L.join(",")}),s={},(0,d.Z)(s,_.gP,j),(0,d.Z)(s,_.xF,p.zx),(0,d.Z)(s,_.pX,B),"adjustment coupon applied is invalid"),x="validation failed: user would have duplicate subscription",T="validation failed: duplicate products selected or the customer already has a subscription of this type. activating will result in concurrent duplicate subscriptions.",k="validation failed: user already has an incompatible subscription",C="validation failed: current subscription cannot mix with team subscription",I="validation failed: a user cannot mix a team and non-team subscription.",z=(u={},(0,d.Z)(u,_.k4,(r={},(0,d.Z)(r,x,"alerts:image_pricing_duplicate_subscription"),(0,d.Z)(r,T,"alerts:image_pricing_duplicate_subscription"),(0,d.Z)(r,k,"alerts:image_pricing_incompatible_subscription"),(0,d.Z)(r,C,"alerts:image_pricing_cannot_mix_team_subscription"),(0,d.Z)(r,I,"alerts:image_pricing_cannot_mix_team_subscription"),(0,d.Z)(r,E,"alerts:pricing_invalid_coupon_code"),(0,d.Z)(r,"defaultAlert","alerts:default_pricing_alert"),r)),(0,d.Z)(u,_.pX,(a={},(0,d.Z)(a,x,"alerts:footage_pricing_duplicate_subscription"),(0,d.Z)(a,T,"alerts:footage_pricing_duplicate_subscription"),(0,d.Z)(a,k,"alerts:footage_pricing_incompatible_subscription"),(0,d.Z)(a,C,"alerts:footage_pricing_incompatible_subscription"),(0,d.Z)(a,I,"alerts:footage_pricing_incompatible_subscription"),(0,d.Z)(a,E,"alerts:pricing_invalid_coupon_code"),(0,d.Z)(a,"defaultAlert","alerts:default_pricing_alert"),a)),(0,d.Z)(u,_.xF,(l={},(0,d.Z)(l,x,"alerts:music_pricing_duplicate_subscription"),(0,d.Z)(l,T,"alerts:music_pricing_duplicate_subscription"),(0,d.Z)(l,k,"alerts:music_pricing_incompatible_subscription"),(0,d.Z)(l,C,"alerts:music_pricing_incompatible_subscription"),(0,d.Z)(l,I,"alerts:music_pricing_incompatible_subscription"),(0,d.Z)(l,E,"alerts:pricing_invalid_coupon_code"),(0,d.Z)(l,"defaultAlert","alerts:default_pricing_alert"),l)),(0,d.Z)(u,_.gP,(c={},(0,d.Z)(c,I,"alerts:editorial_pricing_cannot_mix_team_subscription"),(0,d.Z)(c,E,"alerts:pricing_invalid_coupon_code"),(0,d.Z)(c,"defaultAlert","alerts:default_pricing_alert"),c)),(0,d.Z)(u,"none",{defaultAlert:"alerts:default_pricing_alert"}),u)},28469:function(e,t,i){i.d(t,{w:function(){return n}});var n=(0,i(67294).createContext)({})},59777:function(e,t,i){i.d(t,{l:function(){return r}});var n=i(67294),o=i(28469),s=i(85893),r=function(e){var t=e.allSizesAssetEligibility,i=e.asset,r=e.children;return(0,s.jsx)(o.w.Provider,{value:(0,n.useMemo)((function(){return{allSizesAssetEligibility:t,asset:i}}),[t,i]),children:r})};r.defaultProps={allSizesAssetEligibility:{},asset:{}}},12439:function(e,t,i){i.d(t,{IP:function(){return S},jC:function(){return m}});var n=i(59499),o=i(23204),s=i.n(o),r=i(40821),a=i(357),l=i(95944),c=i(43257),u=i(37254),d=i(97708),p=i(25021),g=i(79138),_=i(8924),f=i(69089),b=i(69648);function h(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function v(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?h(Object(i),!0).forEach((function(t){(0,n.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var w=function(e){var t=e.assets,i=e.include,n=void 0===i?"subscriptions,licenses,licenses.product,subscriptions.product":i,o=e.licenseName,r=e.selectedAssetSize,a=t[0],_=(0,p._L)(a),f={};(null===t||void 0===t?void 0:t.length)>=2?f.content_ids=t.filter((function(e){return!!e.id})).join(","):f.content_id=null===a||void 0===a?void 0:a.id;var b=function(e){var t=e.assetTypeFromAsset,i=e.licenseName,n=e.selectedAssetSize;switch(t){case l.pX:return v({},(null===n||void 0===n?void 0:n.name)&&{content_size:g.Oy.SSTK_TO_LEGACY_ELIGIBILTY[n.name]||n.name});case l.j0:case l.xF:return{content_format:l.j0};default:return v(v(v(v({},(null===n||void 0===n?void 0:n.name)&&{content_size:g.nd[s()(n.name)].downloadName}),(null===n||void 0===n?void 0:n.format)&&{content_format:n.format}),i===u.HS&&{license_name:u.HS}),(i===c.sV||t===l.gP)&&{license_name:c.sV})}}({assetTypeFromAsset:_,licenseName:o,selectedAssetSize:r});return v(v({include:n,content_type:(0,d.JD)({assetType:_,assetId:null===a||void 0===a?void 0:a.id})},b),f)},m=function(e){var t=e.licenseeIdentifier,i=e.assets,n=e.licenseName,o=e.selectedAssetSize;return(0,a.Td)({urlParams:{licenseeIdentifier:t},queryParams:w({assets:i,licenseName:n,selectedAssetSize:o})}).formattedUrl},S=function(e){var t=e.assets,i=e.licenseeIdentifier,n=void 0===i?c.RU:i,o=e.licenseName,s=e.selectedAssetSize,a=e.shouldFetch,l=void 0===a||a,u=(0,b.B)();return(0,r.ZP)(l&&u?m({licenseeIdentifier:n,assets:t,licenseName:o,selectedAssetSize:s}):null,(function(e){return _.uS.get(e).then((function(e){return(0,f.O)(e.data)}))}))}}}]);
//# sourceMappingURL=41671-5f1c980eaaefa80b.js.map